<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T.C. Plaka Kontrol SimÃ¼lasyonu (JavaScript)</title>
    <style>
        /* ========================== */
        /* TEMEL VE AÃ‡IK TEMA STÄ°LLERÄ° */
        /* ========================== */
        :root {
            --bg-color: #f0f0f0;
            --text-color: #333;
            --terminal-bg: #2e3436;
            --terminal-text: #d3d7cf;
            --prompt-color: #729fcf;
            --info-color: #8ae234;
            --warning-color: #fcaf3e;
            --error-color: #ef2929;
            --cizgi-color: #555753;
            --input-color: #fff;
            --button-bg: #ccc;
            --button-text: #333;
        }

        /* ========================== */
        /* KOYU TEMA STÄ°LLERÄ° */
        /* ========================== */
        body.dark-theme {
            --bg-color: #1e1e1e;
            --text-color: #e0e0e0;
            --terminal-bg: #0d1117; /* GitHub Dark Theme Terminali */
            --terminal-text: #c9d1d9;
            --prompt-color: #58a6ff;
            --info-color: #56d364;
            --warning-color: #d29922;
            --error-color: #f85149;
            --cizgi-color: #484f58;
            --input-color: #e0e0e0;
            --button-bg: #21262d;
            --button-text: #c9d1d9;
        }
        
        /* Tema deÄŸiÅŸkenlerini uygulama */
        body { 
            font-family: 'Consolas', monospace; 
            padding: 20px; 
            transition: background-color 0.3s, color 0.3s;
            background-color: var(--bg-color);
            color: var(--text-color);
        }
        
        .terminal { 
            background-color: var(--terminal-bg); 
            color: var(--terminal-text); 
            border-radius: 8px; 
            padding: 15px; 
            min-height: 500px; 
            overflow-y: auto; 
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5); 
        }
        .prompt-area { display: flex; margin-top: 10px; }
        .prompt { color: var(--prompt-color); margin-right: 5px; }
        #userInput { 
            flex-grow: 1; 
            background: none; 
            border: none; 
            color: var(--input-color); 
            font-family: inherit; 
            font-size: 1em; 
            outline: none; 
        }
        .output-line { margin: 0; white-space: pre-wrap; }
        
        /* Renk SÄ±nÄ±flarÄ± */
        .info { color: var(--info-color); }
        .warning { color: var(--warning-color); }
        .error { color: var(--error-color); }
        .hata-cizgi { color: var(--cizgi-color); }
        
        /* Markdown'dan gelen bold ve emoji stilleri */
        .output-line strong { font-weight: bold; color: var(--terminal-text); }
        .output-line span.emoji-bullet { color: var(--warning-color); } 

        /* TEMA BUTONU STÄ°LLERÄ° */
        #theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 8px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s, color 0.3s;
            background-color: var(--button-bg);
            color: var(--button-text);
        }
    </style>
</head>
<body>

    <button id="theme-toggle">ğŸŒ™ Koyu Tema</button>

<div class="terminal" id="terminal">
    <p class="output-line info">>>> T.C. PLAKA KONTROL SÄ°STEMÄ° (v6.0 - JavaScript SimÃ¼lasyon)</p>
    <div class="prompt-area">
        <span class="prompt" id="promptDisplay">PLAKA GÄ°RÄ°ÅÄ° ></span>
        <input type="text" id="userInput" autofocus onkeydown="handleInput(event)">
    </div>
</div>

<script>
// =======================================================
// JS PLAKA KONTROL SINIFI (DeÄŸiÅŸiklik yapÄ±lmadÄ±)
// =======================================================
class PlakaKontrol {
    static IL_KODU_REGEX = "(0[1-9]|[1-7]\\d|8[0-1])";
    static SIVIL_REGEX = new RegExp("^" + PlakaKontrol.IL_KODU_REGEX + "([A-Z]{1,3})(\\d{1,4})$");

    static IL_KODLARI = {
        "01": "Adana", "02": "AdÄ±yaman", "03": "Afyonkarahisar", "04": "AÄŸrÄ±", "05": "Amasya",
        "06": "Ankara", "07": "Antalya", "08": "Artvin", "09": "AydÄ±n", "10": "BalÄ±kesir",
        "11": "Bilecik", "12": "BingÃ¶l", "13": "Bitlis", "14": "Bolu", "15": "Burdur",
        "16": "Bursa", "17": "Ã‡anakkale", "18": "Ã‡ankÄ±rÄ±", "19": "Ã‡orum", "20": "Denizli",
        "21": "DiyarbakÄ±r", "22": "Edirne", "23": "ElazÄ±ÄŸ", "24": "Erzincan", "25": "Erzurum",
        "26": "EskiÅŸehir", "27": "Gaziantep", "28": "Giresun", "29": "GÃ¼mÃ¼ÅŸhane", "30": "Hakkari",
        "31": "Hatay", "32": "Isparta", "33": "Mersin", "34": "Ä°stanbul", "35": "Ä°zmir",
        "36": "Kars", "37": "Kastamonu", "38": "Kayseri", "39": "KÄ±rklareli", "40": "KÄ±rÅŸehir",
        "41": "Kocaeli", "42": "Konya", "43": "KÃ¼tahya", "44": "Malatya", "45": "Manisa",
        "46": "KahramanmaraÅŸ", "47": "Mardin", "48": "MuÄŸla", "49": "MuÅŸ", "50": "NevÅŸehir",
        "51": "NiÄŸde", "52": "Ordu", "53": "Rize", "54": "Sakarya", "55": "Samsun",
        "56": "Siirt", "57": "Sinop", "58": "Sivas", "59": "TekirdaÄŸ", "60": "Tokat",
        "61": "Trabzon", "62": "Tunceli", "63": "ÅanlÄ±urfa", "64": "UÅŸak", "65": "Van",
        "66": "Yozgat", "67": "Zonguldak", "68": "Aksaray", "69": "Bayburt", "70": "Karaman",
        "71": "KÄ±rÄ±kkale", "72": "Batman", "73": "ÅÄ±rnak", "74": "BartÄ±n", "75": "Ardahan",
        "76": "IÄŸdÄ±r", "77": "Yalova", "78": "KarabÃ¼k", "79": "Kilis", "80": "Osmaniye",
        "81": "DÃ¼zce"
    };
    
    constructor(plaka) {
        this.orijinalPlaka = plaka;
        this.temizlenmisPlaka = this._plakayiTemizle(plaka);
        this.hataMesaji = "";
        this.plakaTipi = "TanÄ±mlanamadÄ±";
        this.gecerli = false;
        this.simuleVeri = {};
        this.ilKodu = null;
        this.eslesme = null;
    }

    _plakayiTemizle(plaka) {
        return plaka.trim().toUpperCase().replace(/\s/g, "");
    }

    _rastgeleKullaniciUret() {
        const isimler = ["AyÅŸe YÄ±lmaz", "Ahmet Kaya", "Fatma Demir", "Mehmet Ã–ztÃ¼rk", "Zeynep Ã‡elik"];
        const markalar = ["Toyota", "Renault", "Fiat", "Ford", "Volkswagen", "BMW", "Mercedes"];
        const durumlar = ["GeÃ§erli", "SÃ¼resi DolmuÅŸ"];
        const sehirler = Object.values(PlakaKontrol.IL_KODLARI);
        
        const randomNum = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
        const formatTL = (sayi) => sayi.toLocaleString('tr-TR', { style: 'currency', currency: 'TRY', minimumFractionDigits: 2 });
        const rastgeleTarih = () => {
            const yil = randomNum(1955, 2000);
            const ay = randomNum(1, 12).toString().padStart(2, '0');
            const gun = randomNum(1, 28).toString().padStart(2, '0');
            return `${gun}.${ay}.${yil}`;
        };

        const trafikBorcu = Math.random() < 0.5 ? "Yok" : formatTL(randomNum(100, 3000));
        const bankaBakiyesi = formatTL(randomNum(10000, 5000000));
        const telefonNo = `(5${randomNum(10, 99)}) ${randomNum(100, 999)} ${randomNum(10, 99)} ${randomNum(10, 99)}`;

        this.simuleVeri = {
            "Ruhsat Sahibi": isimler[randomNum(0, isimler.length - 1)],
            "TC Kimlik No": "xxxxxxxxxxx",
            "Telefon NumarasÄ±": telefonNo,
            "Marka / Model": `${markalar[randomNum(0, markalar.length - 1)]} Serisi ${randomNum(100, 999)}`,
            "Ruhsat Sahibi Ä°l": sehirler[randomNum(0, sehirler.length - 1)],
            "Muayene GeÃ§erlilik": durumlar[randomNum(0, 1)],
            "Sigorta Durumu": durumlar[randomNum(0, 1)],
            "Trafik CezasÄ± Borcu": trafikBorcu,
            "Dogum Tarihi": rastgeleTarih(),
            "Dogum Yeri": sehirler[randomNum(0, sehirler.length - 1)],
            "KÃ¼tÃ¼k Ä°l/Ä°lÃ§e": `${sehirler[randomNum(0, sehirler.length - 1)]}/${sehirler[randomNum(0, sehirler.length - 1)]}`,
            "Ikametgah Adresi": `${sehirler[randomNum(0, sehirler.length - 1)]} Merkez Mah. No: ${randomNum(1, 100)}`,
            "Banka Hesabi Bakiyesi": bankaBakiyesi
        };
        return this.simuleVeri;
    }

    gecerliMi() {
        const plaka = this.temizlenmisPlaka;

        if (!/^[A-Z0-9]+$/.test(plaka)) {
            this.hataMesaji = "Plaka dizesinde sadece harf (A-Z) ve rakam (0-9) kullanÄ±lmalÄ±dÄ±r.";
            this.gecerli = false;
            return false;
        }

        this.eslesme = plaka.match(PlakaKontrol.SIVIL_REGEX);

        if (this.eslesme) {
            this.gecerli = true;
            this.plakaTipi = "Sivil Standart Plaka";
            this.ilKodu = this.eslesme[1];
            return true;
        } else {
            const ilKoduStr = plaka.substring(0, 2);
            if (!/^[0-9]{2}$/.test(ilKoduStr) || !PlakaKontrol.IL_KODLARI[ilKoduStr]) {
                this.hataMesaji = `Ä°lk iki karakter ya sayÄ± deÄŸil ya da T.C. plaka kodlarÄ± aralÄ±ÄŸÄ±nda (01-81) deÄŸildir.`;
            } else if (plaka.length < 4 || plaka.length > 9) {
                this.hataMesaji = `Plaka uzunluÄŸu hatalÄ±. (${plaka.length} karakter). GeÃ§erli uzunluk 4-9 karakterdir.`;
            } else {
                this.hataMesaji = "Plaka gruplarÄ±nÄ±n uzunluklarÄ± (Harf: 1-3, Rakam: 1-4) veya sÄ±ralamasÄ± hatalÄ±dÄ±r.";
            }

            this.gecerli = false;
            return false;
        }
    }

    getirSehirAdi(ilKodu) {
        return PlakaKontrol.IL_KODLARI[ilKodu] || "BÄ°LÄ°NMEYEN Ä°L KODU";
    }

    raporuOlustur() {
        this.gecerliMi();
        const cizgi = "=".repeat(70);
        const ayirici = "-".repeat(70);
        
        let rapor = `\n${cizgi}\n`;
        rapor += `| PLAKA KONTROL SONUCU: ${this.orijinalPlaka}\n`;
        rapor += `${cizgi}\n`;

        const sonucMesaji = this.gecerli ? "**âœ… GEÃ‡ERLÄ° PLAKA FORMATI**" : "**âŒ GEÃ‡ERSÄ°Z PLAKA FORMATI**";

        rapor += `Format KontrolÃ¼: ${sonucMesaji}\n`;
        rapor += `Temiz Plaka:     ${this.temizlenmisPlaka}\n`;
        rapor += ayirici + "\n";

        if (!this.gecerli) {
            rapor += `âš ï¸ NEDEN GEÃ‡ERSÄ°Z: ${this.hataMesaji}\n`;
            rapor += ayirici + "\n";
            return rapor;
        }

        const sehirAdi = this.getirSehirAdi(this.ilKodu);
        const kullaniciBilgileri = this._rastgeleKullaniciUret();

        rapor += "ğŸ”¢ AYRIÅTIRILMIÅ PLAKA VE KISA SÄ°MÃœLASYON BÄ°LGÄ°LERÄ°\n";
        rapor += `  - **Åehir AdÄ±**:    ${sehirAdi}\n`;
        rapor += `  - **Plaka Tipi**:   ${this.plakaTipi}\n`;
        rapor += `  - **Ruhsat Sahibi**: ${kullaniciBilgileri["Ruhsat Sahibi"]}\n`;
        rapor += `  - **Telefon No**:    ${kullaniciBilgileri["Telefon NumarasÄ±"]}\n`;
        rapor += `  - **BorÃ§ Durumu**:   ${kullaniciBilgileri["Trafik CezasÄ± Borcu"]}\n`;
        rapor += `${ayirici}\n`;

        rapor += "ğŸ’¡ DEVAM ETMEK Ä°Ã‡Ä°N KOMUT GÄ°RÄ°N:\n";
        rapor += "  - **`/araÅŸtir`**: DetaylÄ± ruhsat sahibi ve araÃ§ bilgilerini aÃ§ar.\n";
        rapor += "  - **`/bilgilendirme`**: SimÃ¼lasyon eylemleri (SMS, E-posta) menÃ¼sÃ¼nÃ¼ aÃ§ar.\n";
        raapor += "  - **`yeni`**: Yeni plaka kontrolÃ¼ baÅŸlatÄ±r.\n";
        rapor += `${ayirici}\n`;

        return rapor;
    }
}
// --- JS PLAKA KONTROL SINIFI SONU ---


let currentPlakaNesnesi = null;
let aktifMod = "ANA";
const terminalDiv = document.getElementById('terminal');
const userInput = document.getElementById('userInput');
const promptDisplay = document.getElementById('promptDisplay');

// ****** DÃœZELTÄ°LMÄ°Å HATA GÄ°DERÄ°CÄ° FONKSÄ°YON ******
function appendOutput(text, className = '') {
    // Ã‡Ä±ktÄ±yÄ± satÄ±r satÄ±r bÃ¶lmek
    const lines = text.split('\n');
    
    // GeÃ§erli plaka nesnesi varsa, Ã§Ä±ktÄ± rengini belirleme
    const baseClass = currentPlakaNesnesi && currentPlakaNesnesi.gecerli ? 'info' : className;

    lines.forEach(line => {
        const p = document.createElement('p');
        p.className = 'output-line'; // BaÅŸlangÄ±Ã§ta temel sÄ±nÄ±fÄ± ver

        let formattedLine = line
            .replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;'); // HTML'e kaÃ§Ä±ÅŸ

        // Ã‡izgileri ve AyÄ±rÄ±cÄ±larÄ± Temiz BiÃ§imde HTML'e DÃ¶nÃ¼ÅŸtÃ¼rme
        if (line.match(/^=+$/) || line.match(/^-+$/)) {
             // Sadece eÅŸittir veya tirelerden oluÅŸan Ã§izgileri algÄ±la
             formattedLine = line.replace(/=/g, 'â€”').replace(/-/g, 'â€”');
             p.className = 'output-line hata-cizgi'; // Ã‡izgi ve AyÄ±rÄ±cÄ±lar iÃ§in Ã¶zel stil
        } else {
            // Markdown'dan gelen bold ve emoji stillerini HTML'e Ã§evirme
            formattedLine = formattedLine
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // **Bold** iÅŸaretlerini <strong>'a Ã§evir

                // Emoji BiÃ§imlendirmesi
                .replace(/âš ï¸/g, '<span class="warning">âš ï¸</span>')
                .replace(/âœ…/g, '<span class="info">âœ…</span>')
                .replace(/âŒ/g, '<span class="error">âŒ</span>')
                .replace(/ğŸ•µï¸/g, '<span class="info">ğŸ•µï¸</span>')
                .replace(/ğŸ“/g, '<span class="info">ğŸ“</span>')
                .replace(/ğŸ”¢/g, '<span class="info">ğŸ”¢</span>')
                .replace(/ğŸ’¡/g, '<span class="info">ğŸ’¡</span>');
                
            // BoÅŸluklarÄ± korumak iÃ§in satÄ±r baÅŸÄ±ndaki birden fazla boÅŸluÄŸu &nbsp; ile deÄŸiÅŸtirme
            formattedLine = formattedLine.replace(/^ /, '&nbsp;').replace(/ {2}/g, '&nbsp;&nbsp;');
            
            // EÄŸer Ã§izgi deÄŸilse, rengi belirle
            if (p.className !== 'output-line hata-cizgi') {
                p.className = 'output-line ' + (line.includes("GEÃ‡ERSÄ°Z") ? 'error' : baseClass);
            }
        }
        
        p.innerHTML = formattedLine.trim().length > 0 ? formattedLine : '&nbsp;'; 
        terminalDiv.insertBefore(p, terminalDiv.lastElementChild);
    });
    terminalDiv.scrollTop = terminalDiv.scrollHeight; // En alta kaydÄ±r
}
// **********************************************


function updatePrompt() {
    if (currentPlakaNesnesi === null) {
        promptDisplay.textContent = "PLAKA GÄ°RÄ°ÅÄ° >";
    } else {
        promptDisplay.textContent = `KOMUT (${aktifMod}) >`;
    }
}

function gosterArastirMenusu(nesne) {
    const veri = nesne.simuleVeri;
    let output = "\n" + "=".repeat(70) + "\n";
    output += "| ğŸ•µï¸ DETAYLI RUHSAT SAHÄ°BÄ° VE Ã–ZEL BÄ°LGÄ°LER (SÄ°MÃœLASYON) \n";
    output += "=".repeat(70) + "\n";
    output += `  - **Ruhsat Sahibi AdÄ±**:    ${veri["Ruhsat Sahibi"]}\n`;
    output += `  - **TC Kimlik No**:         ${veri["TC Kimlik No"]}\n`;
    output += `  - **DoÄŸum Tarihi**:         ${veri["Dogum Tarihi"]}\n`;
    output += `  - **DoÄŸum Yeri**:           ${veri["Dogum Yeri"]}\n`;
    output += `  - **KÃ¼tÃ¼k Ä°l/Ä°lÃ§e**:        ${veri["KÃ¼tÃ¼k Ä°l/Ä°lÃ§e"]}\n`;
    output += `  - **Ä°kametgah Adresi**:     ${veri["Ikametgah Adresi"]}\n`;
    output += `  - **Marka / Model**:        ${veri["Marka / Model"]}\n`;
    output += `  - **Banka HesabÄ± Bakiyesi**: ${veri["Banka Hesabi Bakiyesi"]}\n`;
    output += "\nâš ï¸ YUKARIDAKÄ° TÃœM BÄ°LGÄ°LER BÄ°R YAZILIM TARAFINDAN RASGELE ÃœRETÄ°LMÄ°ÅTÄ°R VE GERÃ‡EK DEÄÄ°LDÄ°R.\n";
    output += "=".repeat(70);
    appendOutput(output);
}

function gosterBilgilendirmeMenusu() {
    let output = "\n" + "=".repeat(70) + "\n";
    output += "| ğŸ“ BÄ°LGÄ°LENDÄ°RME VE EYLEM SÄ°MÃœLASYONU MENÃœSÃœ \n";
    output += "=".repeat(70) + "\n";
    output += "  - **`/sms`**: BorÃ§ durumu ile ilgili kÄ±sa mesaj gÃ¶nderimini simÃ¼le eder.\n";
    output += "  - **`/eposta`**: Sigorta yenileme uyarÄ±sÄ± e-postasÄ± gÃ¶nderimini simÃ¼le eder.\n";
    output += "  - **`geri`**: Ana menÃ¼ye dÃ¶ner.\n";
    output += "=".repeat(70);
    appendOutput(output);
}

function isleyiciBilgilendirme(nesne, altKomut) {
    const veri = nesne.simuleVeri;
    let output = "\n" + "*".repeat(70) + "\n";

    if (altKomut === "/sms") {
        output += `SMS GÃ–NDERÄ°MÄ° SÄ°MÃœLE EDÄ°LÄ°YOR...\n`;
        output += `ALICI: ${veri["Telefon NumarasÄ±"]}\n`;
        output += `MESAJ: SayÄ±n ${veri["Ruhsat Sahibi"]}, ${nesne.orijinalPlaka} plakalÄ± aracÄ±nÄ±zÄ±n Trafik CezasÄ± Borcu: ${veri["Trafik CezasÄ± Borcu"]}.\n`;
        output += `Durum: BAÅARILI. (Bu bir simÃ¼lasyondur.)\n`;
    } else if (altKomut === "/eposta") {
        output += `E-POSTA GÃ–NDERÄ°MÄ° SÄ°MÃœLE EDÄ°LÄ°YOR...\n`;
        output += `ALICI: ${veri["Ruhsat Sahibi"]} iÃ§in rastgele bir e-posta adresi.\n`;
        output += `KONU: Sigorta SÃ¼resi YaklaÅŸÄ±yor!\n`;
        output += `MESAJ: ${nesne.orijinalPlaka} plakalÄ± aracÄ±nÄ±zÄ±n Zorunlu Sigorta durumu: ${veri["Sigorta Durumu"]}. SÃ¼renizi kontrol edin.\n`;
        output += `Durum: BAÅARILI. (Bu bir simÃ¼lasyondur.)\n`;
    } else {
        appendOutput("Bilinmeyen alt komut. LÃ¼tfen `/sms`, `/eposta` veya `geri` yazÄ±n.", 'error');
        gosterBilgilendirmeMenusu();
        return;
    }
    output += "*".repeat(70);
    appendOutput(output, 'info');
}

function handleInput(event) {
    if (event.key === 'Enter') {
        const giris = userInput.value.trim();
        userInput.value = '';

        if (giris === '') {
            return;
        }

        // KullanÄ±cÄ±nÄ±n girdiÄŸi komutu Ã§Ä±ktÄ±ya ekle
        appendOutput(`${promptDisplay.textContent} ${giris}`, 'prompt');
        const girisLower = giris.toLowerCase();

        if (girisLower === 'q' || girisLower === 'exit') {
            appendOutput("Program sonlandÄ±rÄ±lÄ±yor. Ä°yi gÃ¼nler!", 'info');
            userInput.disabled = true;
            promptDisplay.textContent = "PROGRAM SONLANDI";
            return;
        }

        try {
            // --- ANA MOD Ä°ÅLEME ---
            if (currentPlakaNesnesi === null || girisLower === 'yeni' || currentPlakaNesnesi.gecerli === false) {
                if (girisLower === 'yeni' && currentPlakaNesnesi !== null) {
                    appendOutput("\n[INFO] Yeni plaka kontrolÃ¼ baÅŸlatÄ±lÄ±yor.", 'info');
                }
                
                const plakaToControl = (girisLower === 'yeni' && currentPlakaNesnesi !== null) ? '' : giris;
                
                // Yeni plaka giriÅŸi sadece 'yeni' komutuyla deÄŸil, geÃ§ersiz giriÅŸte de devreye girer.
                if (plakaToControl.length > 0) {
                    const kontrolNesnesi = new PlakaKontrol(plakaToControl);
                    const rapor = kontrolNesnesi.raporuOlustur();
                    appendOutput(rapor);

                    if (kontrolNesnesi.gecerli) {
                        currentPlakaNesnesi = kontrolNesnesi;
                        aktifMod = "ANA";
                    } else {
                        currentPlakaNesnesi = null;
                        aktifMod = "ANA";
                    }
                } else if (girisLower === 'yeni' && currentPlakaNesnesi !== null) {
                    currentPlakaNesnesi = null; // Yeni giriÅŸ bekleniyor
                } else {
                    appendOutput("LÃ¼tfen kontrol etmek istediÄŸiniz plakayÄ± girin.", 'warning');
                }
                
            } 
            // --- KOMUT MODU Ä°ÅLEME (Plaka geÃ§erliyse) ---
            else if (currentPlakaNesnesi !== null) {
                if (aktifMod === "ANA") {
                    if (girisLower === "/araÅŸtir") {
                        gosterArastirMenusu(currentPlakaNesnesi);
                    } else if (girisLower === "/bilgilendirme") {
                        gosterBilgilendirmeMenusu();
                        aktifMod = "BILGILENDIRME";
                    } else if (girisLower === "yeni") {
                        currentPlakaNesnesi = null; 
                    } else {
                        appendOutput("Bilinmeyen komut. LÃ¼tfen `/araÅŸtir`, `/bilgilendirme` veya `yeni` yazÄ±n.", 'error');
                    }

                } else if (aktifMod === "BILGILENDIRME") {
                    if (girisLower === "geri") {
                        aktifMod = "ANA";
                        appendOutput("Ana komut menÃ¼sÃ¼ne dÃ¶nÃ¼ldÃ¼.\nMevcut komutlar: /araÅŸtir, /bilgilendirme, yeni", 'info');
                    } else {
                        isleyiciBilgilendirme(currentPlakaNesnesi, girisLower);
                    }
                }
            }
        } catch (e) {
            appendOutput(`Beklenmedik bir hata oluÅŸtu: ${e.message}`, 'error');
        }

        updatePrompt();
    }
}

// =======================================================
// TEMA DEÄÄ°ÅTÄ°RME MANTIÄI (YENÄ° EK)
// =======================================================

const themeToggle = document.getElementById('theme-toggle');
const body = document.body;
const themeKey = 'plaka-kontrol-theme'; // Yerel depolama anahtarÄ±

// 1. KaydedilmiÅŸ temayÄ± yÃ¼kle
function loadTheme() {
    const savedTheme = localStorage.getItem(themeKey) || 'dark'; // VarsayÄ±lan olarak koyu tema yapalÄ±m
    setTheme(savedTheme);
}

// 2. TemayÄ± ayarla ve yerel depolamaya kaydet
function setTheme(theme) {
    if (theme === 'dark') {
        body.classList.add('dark-theme');
        themeToggle.innerHTML = 'â˜€ï¸ AÃ§Ä±k Tema';
        localStorage.setItem(themeKey, 'dark');
    } else {
        body.classList.remove('dark-theme');
        themeToggle.innerHTML = 'ğŸŒ™ Koyu Tema';
        localStorage.setItem(themeKey, 'light');
    }
}

// 3. Buton tÄ±klama iÅŸlevi
themeToggle.addEventListener('click', () => {
    // Åu anki temayÄ± kontrol et
    const currentTheme = body.classList.contains('dark-theme') ? 'dark' : 'light';
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    setTheme(newTheme);
});

// Sayfa yÃ¼klendiÄŸinde temayÄ± yÃ¼kle
window.addEventListener('load', loadTheme);

</script>

</body>
</html>
